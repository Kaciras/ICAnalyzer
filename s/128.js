(self.webpackChunkic_analyzer=self.webpackChunkic_analyzer||[]).push([[128],{4120:t=>{var e;self,e=function(){var t,e;return t={132:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.bezkrovnySsim=void 0;var i=r(490),a=r(971);e.bezkrovnySsim=function(t,e,r){for(var n=r.windowSize,d=Math.ceil(t.width/n),o=Math.ceil(t.height/n),h=Array(d*o),u=0,s=0;s<t.height;s+=n)for(var f=0;f<t.width;f+=n){var l=Math.min(n,t.width-f),c=Math.min(n,t.height-s),v=a.sub(t,f,c,s,l),w=a.sub(e,f,c,s,l);h[u++]=function(t,e,r){var a=t.data,n=e.data,d=r.bitDepth,o=r.k1,h=r.k2,u=Math.pow(2,d)-1,s=Math.pow(o*u,2),f=Math.pow(h*u,2),l=i.average(a),c=i.average(n),v=i.variance(a,l),w=i.variance(n,c);return(2*l*c+s)*(2*i.covariance(a,n,l,c)+f)/((Math.pow(l,2)+Math.pow(c,2)+s)*(v+w+f))}(v,w,r)}return{data:h,width:d,height:o}}},63:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.defaults=void 0,e.defaults={windowSize:11,k1:.01,k2:.03,bitDepth:8,downsample:"original",ssim:"weber",maxSize:256,rgb2grayVersion:"integer"}},441:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.downsample=void 0;var i=r(490),a=r(971);function n(t,e,r){var i=a.imfilter(t,e,"symmetric","same");return a.skip2d(i,[0,r,i.height],[0,r,i.width])}e.downsample=function(t,e){return"original"===e.downsample?function(t,e,r){void 0===r&&(r=256);var d=Math.round(Math.min(t.width,e.height)/r);if(d>1){var o=a.ones(d);t=n(t,o=i.divide2d(o,i.sum2d(o)),d),e=n(e,o,d)}return[t,e]}(t[0],t[1],e.maxSize):t}},607:function(t,e,r){var i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++)for(var a in e=arguments[r])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.ssim=e.getOptions=void 0;var a=r(971),n=r(490),d=r(773),o=r(595),h=r(132),u=r(441),s=r(63),f=r(535),l={fast:d.ssim,original:o.originalSsim,bezkrovny:h.bezkrovnySsim,weber:f.weberSsim};function c(t){var e=i(i({},s.defaults),t);return function(t){if(Object.keys(t).forEach(function(t){if(!(t in s.defaults))throw Error('"'+t+'" is not a valid option')}),"k1"in t&&("number"!=typeof t.k1||t.k1<0))throw Error("Invalid k1 value. Default is "+s.defaults.k1);if("k2"in t&&("number"!=typeof t.k2||t.k2<0))throw Error("Invalid k2 value. Default is "+s.defaults.k2);if(!(t.ssim in l))throw Error("Invalid ssim option (use: "+Object.keys(l).join(", ")+")")}(e),e}function v(t,e,r){var i,d,o,h,s,f,v,w,g,p,m,y,b,M=(new Date).getTime(),_=(v=(d=(m=(p=function(t){var e=t[0],r=t[1],i=t[2];if(e.width!==r.width||e.height!==r.height)throw Error("Image dimensions do not match");return[e,r,i]}([t,e,c(r)]))[0],y=p[1],i="original"===(b=p[2]).rgb2grayVersion?[a.rgb2gray(m),a.rgb2gray(y),b]:[a.rgb2grayInteger(m),a.rgb2grayInteger(y),b])[0],o=i[1],h=i[2],f=[(s=u.downsample([d,o],h))[0],s[1],h])[0],w=f[1],l[(g=f[2]).ssim](v,w,g));return{mssim:void 0!==_.mssim?_.mssim:n.mean2d(_),ssim_map:_,performance:(new Date).getTime()-M}}e.getOptions=c,e.ssim=v,e.default=v},490:(t,e)=>{function r(t){return i(t)/t.length}function i(t){for(var e=0,r=0;r<t.length;r++)e+=t[r];return e}function a(t){for(var e=t.data,r=0,i=0;i<e.length;i++)r+=e[i];return r}function n(t,e){for(var r=t.data,i=t.width,a=t.height,n=Array(r.length),d=0;d<r.length;d++)n[d]=r[d]+e;return{data:n,width:i,height:a}}function d(t,e){return"number"==typeof e?function(t,e){for(var r=t.data,i=t.width,a=t.height,n=Array(r.length),d=0;d<r.length;d++)n[d]=r[d]*e;return{data:n,width:i,height:a}}(t,e):function(t,e){for(var r=t.data,i=t.width,a=t.height,n=e.data,d=Array(r.length),o=0;o<r.length;o++)d[o]=r[o]*n[o];return{data:d,width:i,height:a}}(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.covariance=e.variance=e.mean2d=e.square2d=e.multiply2d=e.divide2d=e.subtract2d=e.add2d=e.sum2d=e.floor=e.sum=e.average=void 0,e.average=r,e.sum=i,e.floor=function(t){for(var e=Array(t.length),r=0;r<t.length;r++)e[r]=Math.floor(t[r]);return e},e.sum2d=a,e.add2d=function(t,e){return"number"==typeof e?n(t,e):function(t,e){for(var r=t.data,i=t.width,a=t.height,n=e.data,d=Array(r.length),o=0;o<a;o++)for(var h=o*i,u=0;u<i;u++)d[h+u]=r[h+u]+n[h+u];return{data:d,width:i,height:a}}(t,e)},e.subtract2d=function(t,e){return"number"==typeof e?n(t,-e):function(t,e){for(var r=t.data,i=t.width,a=t.height,n=e.data,d=Array(r.length),o=0;o<a;o++)for(var h=o*i,u=0;u<i;u++)d[h+u]=r[h+u]-n[h+u];return{data:d,width:i,height:a}}(t,e)},e.divide2d=function(t,e){return"number"==typeof e?function(t,e){for(var r=t.data,i=t.width,a=t.height,n=Array(r.length),d=0;d<r.length;d++)n[d]=r[d]/e;return{data:n,width:i,height:a}}(t,e):function(t,e){for(var r=t.data,i=t.width,a=t.height,n=e.data,d=Array(r.length),o=0;o<r.length;o++)d[o]=r[o]/n[o];return{data:d,width:i,height:a}}(t,e)},e.multiply2d=d,e.square2d=function(t){return d(t,t)},e.mean2d=function(t){return a(t)/t.data.length},e.variance=function(t,e){void 0===e&&(e=r(t));for(var i=0,a=t.length;a--;)i+=Math.pow(t[a]-e,2);return i/t.length},e.covariance=function(t,e,i,a){void 0===i&&(i=r(t)),void 0===a&&(a=r(e));for(var n=0,d=t.length;d--;)n+=(t[d]-i)*(e[d]-a);return n/t.length}},687:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.conv2=void 0;var i=r(490),a=r(298),n=r(118),d=r(799);function o(t,e,r){var i=t.data,a=t.width,n=t.height;void 0===r&&(r="full");for(var o=a+e.width-1,h=n+e.height-1,u=d.zeros(h,o).data,f=0;f<e.height;f++)for(var l=0;l<e.width;l++){var c=e.data[f*e.width+l];if(c)for(var v=0;v<n;v++)for(var w=0;w<a;w++)u[(v+f)*o+w+l]+=i[v*a+w]*c}return s({data:u,width:o,height:h},r,n,e.height,a,e.width)}function h(t,e,r){var n=e.data,d=e.width,o=e.height;void 0===r&&(r="full");var h=u(t,a.ones(o,1),a.ones(1,d),r);return i.multiply2d(h,n[0])}function u(t,e,r,i){void 0===i&&(i="full");var a=Math.max(e.height,e.width),n=Math.max(r.height,r.width),d=o(t,e,"full");return s(o(d,r,"full"),i,t.height,a,t.width,n)}function s(t,e,r,i,a,d){if("full"===e)return t;if("same"===e){var o=Math.ceil((t.height-r)/2),h=Math.ceil((t.width-a)/2);return n.sub(t,o,r,h,a)}return n.sub(t,i-1,r-i+1,d-1,a-d+1)}e.conv2=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t[2]&&t[2].data?u.apply(void 0,t):!function(t){for(var e=t.data,r=e[0],i=1;i<e.length;i++)if(e[i]!==r)return!1;return!0}(t[1])?o.apply(void 0,t):h.apply(void 0,t)}},346:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.filter2=void 0;var i=r(687);e.filter2=function(t,e,r){return void 0===r&&(r="same"),i.conv2(e,function(t){for(var e=t.data,r=t.width,i=t.height,a=Array(e.length),n=0;n<i;n++)for(var d=0;d<r;d++)a[n*r+d]=e[(i-1-n)*r+r-1-d];return{data:a,width:r,height:i}}(t),r)}},470:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.fspecial=void 0;var i=r(490);e.fspecial=function(t,e,r){void 0===e&&(e=3),void 0===r&&(r=1.5);var a=function(t,e){for(var r=t.data,i=t.width,a=t.height,n=Array(r.length),d=0;d<r.length;d++)n[d]=Math.exp(-r[d]/(2*Math.pow(e,2)));return{data:n,width:i,height:a}}(function(t){for(var e=2*t+1,r=Array(Math.pow(e,2)),i=0;i<e;i++)for(var a=0;a<e;a++)r[i*e+a]=Math.pow(i-t,2)+Math.pow(a-t,2);return{data:r,width:e,height:e}}(e=(e-1)/2),r),n=i.sum2d(a);return i.divide2d(a,n)}},521:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.imfilter=void 0;var i=r(20),a=r(389),n=r(490),d=r(346);e.imfilter=function(t,e,r,o){var h;return void 0===r&&(r="symmetric"),void 0===o&&(o="same"),t=function(t,e,r,d){if(t=a.padarray(t,n.floor([e/2,r/2]),d),0===i.mod(e,2)&&(t.data=t.data.slice(0,-t.width),t.height--),0===i.mod(r,2)){for(var o=[],h=0;h<t.data.length;h++)(h+1)%t.width!=0&&o.push(t.data[h]);t.data=o,t.width--}return t}(t,e.width,e.height,r),"same"===(h=o)&&(h="valid"),o=h,d.filter2(e,t,o)}},971:function(t,e,r){var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){void 0===i&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){void 0===i&&(i=r),t[i]=e[r]}),a=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||i(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),a(r(687),e),a(r(346),e),a(r(470),e),a(r(521),e),a(r(150),e),a(r(298),e),a(r(389),e),a(r(582),e),a(r(439),e),a(r(118),e),a(r(240),e),a(r(799),e)},928:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.numbers=void 0,e.numbers=function(t,e,r){for(var i=e*t,a=Array(i),n=0;n<i;n++)a[n]=r;return{data:a,width:e,height:t}}},20:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.mod=void 0,e.mod=function(t,e){return t-e*Math.floor(t/e)}},150:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.normpdf=void 0,e.normpdf=function(t,e,r){var i=t.data,a=t.width,n=t.height;void 0===e&&(e=0),void 0===r&&(r=1);for(var d=Array(i.length),o=0;o<i.length;o++){var h=(i[o]-e)/r;d[o]=Math.exp(-Math.pow(h,2)/2)/(2.5066282746310007*r)}return{data:d,width:a,height:n}}},298:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ones=void 0;var i=r(928);e.ones=function(t,e){return void 0===e&&(e=t),i.numbers(t,e,1)}},389:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.padarray=void 0;var i=r(20);e.padarray=function(t,e,r,a){var n=e[0],d=e[1];return t.height>=n&&t.width>=d?function(t,e){for(var r=e[0],i=e[1],a=t.width+2*i,n=t.height+2*r,d=Array(a*n),o=-r;o<0;o++){for(var h=-i;h<0;h++)d[(o+r)*a+h+i]=t.data[(Math.abs(o)-1)*t.width+Math.abs(h)-1];for(h=0;h<t.width;h++)d[(o+r)*a+h+i]=t.data[(Math.abs(o)-1)*t.width+h];for(h=t.width;h<t.width+i;h++)d[(o+r)*a+h+i]=t.data[(Math.abs(o)-1)*t.width+2*t.width-h-1]}for(o=0;o<t.height;o++){for(h=-i;h<0;h++)d[(o+r)*a+h+i]=t.data[o*t.width+Math.abs(h)-1];for(h=0;h<t.width;h++)d[(o+r)*a+h+i]=t.data[o*t.width+h];for(h=t.width;h<t.width+i;h++)d[(o+r)*a+h+i]=t.data[o*t.width+2*t.width-h-1]}for(o=t.height;o<t.height+r;o++){for(h=-i;h<0;h++)d[(o+r)*a+h+i]=t.data[(2*t.height-o-1)*t.width+Math.abs(h)-1];for(h=0;h<t.width;h++)d[(o+r)*a+h+i]=t.data[(2*t.height-o-1)*t.width+h];for(h=t.width;h<t.width+i;h++)d[(o+r)*a+h+i]=t.data[(2*t.height-o-1)*t.width+2*t.width-h-1]}return{data:d,width:a,height:n}}(t,[n,d]):function(t,e){for(var r,a=(r=function(t){for(var e=t.data,r=t.width,i=t.height,a=Array(e.length),n=0;n<i;n++)for(var d=0;d<r;d++)a[n*r+d]=e[(i-1-n)*r+d];return{data:a,width:r,height:i}}(t),{data:t.data.concat(r.data),height:t.height+r.height,width:t.width}),n=t.height+2*e,d=Array(t.width*n),o=-e;o<t.height+e;o++)for(var h=0;h<t.width;h++)d[(o+e)*t.width+h]=a.data[i.mod(o,a.height)*t.width+h];return{data:d,width:t.width,height:n}}(function(t,e){for(var r=t.width+2*e,a=Array(r*t.height),n=function(t,e){for(var r=t.width+e.width,i=Array(t.height*r),a=0;a<t.height;a++){for(var n=0;n<t.width;n++)i[a*r+n]=t.data[a*t.width+n];for(n=0;n<e.width;n++)i[a*r+n+t.width]=e.data[a*e.width+n]}return{data:i,width:r,height:t.height}}(t,function(t){for(var e=t.data,r=t.width,i=t.height,a=Array(e.length),n=0;n<i;n++)for(var d=0;d<r;d++)a[n*r+d]=e[n*r+r-1-d];return{data:a,width:r,height:i}}(t)),d=0;d<t.height;d++)for(var o=-e;o<t.width+e;o++)a[d*r+o+e]=n.data[d*n.width+i.mod(o,n.width)];return{data:a,width:r,height:t.height}}(t,d),n)}},582:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.rgb2grayInteger=e.rgb2gray=void 0,e.rgb2gray=function(t){for(var e=t.data,r=t.width,i=t.height,a=new Uint8Array(r*i),n=0;n<e.length;n+=4)a[n/4]=.29894*e[n]+.58704*e[n+1]+.11402*e[n+2]+.5;return{data:Array.from(a),width:r,height:i}},e.rgb2grayInteger=function(t){for(var e=t.data,r=t.width,i=t.height,a=Array(r*i),n=0;n<e.length;n+=4)a[n/4]=77*e[n]+150*e[n+1]+29*e[n+2]+128>>8;return{data:a,width:r,height:i}}},439:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.skip2d=void 0,e.skip2d=function(t,e,r){for(var i=e[0],a=e[1],n=e[2],d=r[0],o=r[1],h=r[2],u=Math.ceil((h-d)/o),s=Math.ceil((n-i)/a),f=Array(u*s),l=0;l<s;l++)for(var c=0;c<u;c++){var v=i+l*a,w=d+c*o;f[l*u+c]=t.data[v*t.width+w]}return{data:f,width:u,height:s}}},118:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.sub=void 0,e.sub=function(t,e,r,i,a){for(var n=t.data,d=t.width,o=Array(a*r),h=0;h<r;h++)for(var u=0;u<a;u++)o[h*a+u]=n[(i+h)*d+e+u];return{data:o,width:a,height:r}}},240:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.transpose=void 0,e.transpose=function(t){for(var e=t.data,r=t.width,i=t.height,a=Array(r*i),n=0;n<i;n++)for(var d=0;d<r;d++)a[d*i+n]=e[n*r+d];return{data:a,height:r,width:i}}},799:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.zeros=void 0;var i=r(928);e.zeros=function(t,e){return void 0===e&&(e=t),i.numbers(t,e,0)}},595:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.originalSsim=void 0;var i=r(490),a=r(971);e.originalSsim=function(t,e,r){var n=a.fspecial("gaussian",r.windowSize,1.5),d=Math.pow(2,r.bitDepth)-1,o=Math.pow(r.k1*d,2),h=Math.pow(r.k2*d,2);n=i.divide2d(n,i.sum2d(n));var u=a.filter2(n,t,"valid"),s=a.filter2(n,e,"valid"),f=i.square2d(u),l=i.square2d(s),c=i.multiply2d(u,s),v=i.square2d(t),w=i.square2d(e),g=i.subtract2d(a.filter2(n,v,"valid"),f),p=i.subtract2d(a.filter2(n,w,"valid"),l),m=i.subtract2d(a.filter2(n,i.multiply2d(t,e),"valid"),c);if(o>0&&h>0){var y=i.add2d(i.multiply2d(c,2),o),b=i.add2d(i.multiply2d(m,2),h),M=i.add2d(i.add2d(f,l),o),_=i.add2d(i.add2d(g,p),h);return i.divide2d(i.multiply2d(y,b),i.multiply2d(M,_))}var A=i.multiply2d(c,2),k=i.multiply2d(m,2),O=i.add2d(f,l),j=i.add2d(g,p);return i.divide2d(i.multiply2d(A,k),i.multiply2d(O,j))}},773:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ssim=void 0;var i=r(490),a=r(971);e.ssim=function(t,e,r){var n,d,o,h,u,s,f,l,c=a.normpdf(function(t){for(var e=Math.floor(t/2),r=Array(2*e+1),i=-e;i<=e;i++)r[i+e]=Math.abs(i);return{data:r,width:r.length,height:1}}(r.windowSize),0,1.5),v=Math.pow(2,r.bitDepth)-1,w=Math.pow(r.k1*v,2),g=Math.pow(r.k2*v,2);c=i.divide2d(c,i.sum2d(c));var p=a.transpose(c),m=a.conv2(t,c,p,"valid"),y=a.conv2(e,c,p,"valid"),b=i.square2d(m),M=i.square2d(y),_=i.multiply2d(m,y),A=i.square2d(t),k=i.square2d(e),O=i.subtract2d(a.conv2(A,c,p,"valid"),b),j=i.subtract2d(a.conv2(k,c,p,"valid"),M),E=i.subtract2d(a.conv2(i.multiply2d(t,e),c,p,"valid"),_);return w>0&&g>0?(n=i.add2d(i.multiply2d(_,2),w),d=i.add2d(i.multiply2d(E,2),g),o=i.add2d(i.add2d(b,M),w),h=i.add2d(i.add2d(O,j),g),i.divide2d(i.multiply2d(n,d),i.multiply2d(o,h))):(u=i.multiply2d(_,2),s=i.multiply2d(E,2),f=i.add2d(b,M),l=i.add2d(O,j),i.divide2d(i.multiply2d(u,s),i.multiply2d(f,l)))}},535:function(t,e){var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++)for(var a in e=arguments[r])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)};function i(t,e,r,i){return{rightEdge:r[e*i+t+1],bottomEdge:r[(e+1)*i+t],bottomRightEdge:r[(e+1)*i+t+1]}}function a(t,e){for(var r=t.width,a=t.height,n=t.data,d=r+1,o=a+1,h=new Int32Array(d*o),u=a-1;u>=0;--u)for(var s=r-1;s>=0;--s){var f=i(s,u,h,d),l=f.rightEdge,c=f.bottomEdge,v=f.bottomRightEdge;h[u*d+s]=e(n[u*r+s],s,u)+l+c-v}return{data:h,height:o,width:d}}function n(t,e,r){for(var a=t.width,n=t.height,d=t.data,o=e.data,h=a+1,u=n+1,s=new Int32Array(h*u),f=n-1;f>=0;--f)for(var l=a-1;l>=0;--l){var c=i(l,f,s,h),v=c.rightEdge,w=c.bottomEdge,g=c.bottomRightEdge,p=f*a+l;s[f*h+l]=r(d[p],o[p],l,f)+v+w-g}return{data:s,height:u,width:h}}function d(t,e,r){for(var i=t.width,a=t.height,n=t.data,d=i-1,o=a-1,h=d-e+1,u=o-e+1,s=new Int32Array(h*u),f=0;f<o;++f)for(var l=0;l<d;++l)if(l<h&&f<u){var c=n[i*f+l]-n[i*f+l+e]-n[i*(f+e)+l]+n[i*(f+e)+l+e];s[f*h+l]=c/r}return{height:u,width:h,data:s}}function o(t,e){return d(a(t,function(t){return t}),e,1)}function h(t,e,r){for(var i=r*r,n=d(a(t,function(t){return t*t}),r,1),o=0;o<e.data.length;++o){var h=e.data[o]/i,u=n.data[o]/i,s=h*h;n.data[o]=1024*(u-s)}return n}function u(t,e,r,i,a){for(var o=a*a,h=d(n(t,e,function(t,e){return t*e}),a,1),u=0;u<r.data.length;++u)h.data[u]=1024*(h.data[u]/o-r.data[u]/o*(i.data[u]/o));return h}Object.defineProperty(e,"__esModule",{value:!0}),e.weberSsim=e.windowCovariance=e.windowVariance=e.windowSums=e.windowMatrix=e.partialSumMatrix2=e.partialSumMatrix1=void 0,e.partialSumMatrix1=a,e.partialSumMatrix2=n,e.windowMatrix=d,e.windowSums=o,e.windowVariance=h,e.windowCovariance=u,e.weberSsim=function(t,e,i){for(var a=i.bitDepth,n=i.k1,d=i.k2,s=i.windowSize,f=Math.pow(2,a)-1,l=n*f*(n*f),c=d*f*(d*f),v=s*s,w=r(r({},t),{data:Int32Array.from(t.data,function(t){return t+.5})}),g=r(r({},e),{data:Int32Array.from(e.data,function(t){return t+.5})}),p=o(w,s),m=h(w,p,s),y=o(g,s),b=h(g,y,s),M=u(w,g,p,y,s),_=p.data.length,A=0,k=Array(_),O=0;O<_;++O){var j=p.data[O]/v,E=y.data[O]/v,P=m.data[O]/1024,x=b.data[O]/1024,S=(2*j*E+l)*(M.data[O]/1024*2+c)/(j*j+E*E+l)/(P+x+c);k[O]=S,0==O?A=S:A+=(S-A)/(O+1)}return{data:k,width:p.width,height:p.height,mssim:A}}}},e={},function r(i){if(e[i])return e[i].exports;var a=e[i]={exports:{}};return t[i].call(a.exports,a,a.exports,r),a.exports}(607)},t.exports=e()},3015:(t,e,r)=>{"use strict";r.d(e,{yo:()=>M});function i(t){return"string"==typeof t?new TextEncoder().encode(t):t}class a{static DEFAULT_SALT=new Uint32Array([2946145372,2181077037,2431936532,4144006466,3892008467,3333897665,35813,518731389]);static DEFAULT_IV=new Uint32Array([2131821399,2936362010,910573427,233970304,4246405371,1855574468,2888278591,720308971]);static async withPassword(t,e={}){let{iv:r=a.DEFAULT_IV,length:n=128,iterations:d=240537,salt:o=a.DEFAULT_SALT}=e,h=await crypto.subtle.importKey("raw",i(t),"PBKDF2",!1,["deriveKey"]);return new a({name:"AES-GCM",iv:r},await crypto.subtle.deriveKey({name:"PBKDF2",hash:"SHA-512",salt:i(o),iterations:d},h,{name:"AES-GCM",length:n},!1,["encrypt","decrypt"]))}algorithm;key;constructor(t,e){this.key=e,this.algorithm=t}async encrypt(t){return await crypto.subtle.encrypt(this.algorithm,this.key,i(t))}async decrypt(t){return crypto.subtle.decrypt(this.algorithm,this.key,t)}async decryptText(t){return this.decrypt(t).then(t=>new TextDecoder().decode(t))}}let n=0;function d(t,e=0){let r=new Map;async function i(d,o=[]){let h;let u=d.s=n+=1;e>0&&(h=setTimeout(a,e,u),"undefined"==typeof window&&h.unref());let s=new Promise((t,e)=>{r.set(u,{resolve:t,reject:e,timer:h})});try{return await t(d,o),s}catch(t){throw r.delete(u),clearTimeout(h),t}}function a(t){let e=r.get(t);e&&(r.delete(t),e.reject(Error("Receiving message timed out")))}return{txMap:r,request:i,receive:function(t){let e=r.get(t.r);e&&(e.resolve(t),r.delete(t.r),clearTimeout(e.timer))}}}let o=t=>t,h=()=>{};class u{raw;check;constructor(t,e){this.raw=t,this.check=e}get unchecked(){return new u(this.raw,o)}hasStatus(t){return this.then(e=>e.status===t)}json(){return this.then(t=>t.json())}text(){return this.then(t=>t.text())}get location(){return this.then(t=>t.headers.get("location"))}get[Symbol.toStringTag](){return"ResponseFacade"}catch(t){return this.check(this.raw).catch(t)}finally(t){return this.check(this.raw).finally(t)}then(t,e){return this.check(this.raw).then(t,e)}}let s=[1,1e3,1e6,1e9,1e12,1e15,1e18,1e21,1e24],f=/[0-9.]+\s?([a-z]+)\s*/gi;class l{name;sep;units;fractions;constructor(t,e,r,i=" "){this.name=t,this.sep=i,this.units=e,this.fractions=r}getFraction(t,e){if(void 0!==e)return this.getFraction(t)/this.getFraction(e);if(void 0===t)return 1;let{units:r,fractions:i}=this,a=r.indexOf(t);if(-1!==a)return i[a];throw Error(`Unknown ${this.name} unit: ${t}`)}suit(t){let e=this.fractions,r=0;for(;e[r]<=t;)r++;return Math.max(0,r-1)}formatDiv(t,e,r=2){if(!Number.isFinite(t))throw TypeError(`${t} is not a finite number`);let{units:i,fractions:a}=this,n=t*this.getFraction(e),d=this.suit(Math.abs(n));return n/=a[d],`${Number(n.toFixed(r))}${this.sep}${i[d]}`}homogeneous(t,e){let{fractions:r,units:i,sep:a}=this,n=1/0;for(let e of t)e&&(n=Math.min(n,Math.abs(e)));n===1/0&&(n=0);let d=this.getFraction(e),o=this.suit(n*d),h=d/r[o],u=i[o];return{scale:h,unit:u,sep:a,format:(t,e=2)=>(t*h).toFixed(e)+a+u}}formatMod(t,e,r=2){if(!Number.isFinite(t))throw TypeError(`${t} is not a finite number`);let{units:i,fractions:a}=this,n=Math.abs(t)*this.getFraction(e),d=[];for(let t=this.suit(n);t>=0&&r>0;t--,r-=1){let e=a[t];if(n*e<1)break;let r=Math.floor(n/e);n%=e,d.push(`${r}${i[t]}`)}let o=t<0?"-":"";return d.length?o+d.join(" "):`0${e}`}parse(t,e){let{name:r,units:i,fractions:a}=this,n=1/0,d=0,o=0;for(let[e,h]of t.matchAll(f)){let t=i.lastIndexOf(h,n);if(n=t-1,-1===t)throw Error(i.includes(h)?"Units must be ordered from largest to smallest":`Unknown ${r} unit: ${h}`);d+=e.length,o+=parseFloat(e)*a[t]}switch(t.charCodeAt(0)){case 45:o=-o;case 43:d+=1}if(d===t.length&&d>0)return o/this.getFraction(e);throw Error(`Can not convert "${t}" to ${r}`)}}new l("time",["ns","us","ms","s","m","h","d"],[1,1e3,1e6,1e9,6e10,36e11,864e11]),new l("decimal prefix",["","K","M","G","T","P","E","Z","Y"],s,""),new l("data size",["B","KB","MB","GB","TB","PB","EB","ZB","YB"],s),new l("data size",["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],[1,1024,1048576,1073741824,1099511627776,0x4000000000000,0x1000000000000000,11805916207174113e5,12089258196146292e8]);let c=new WeakMap;async function v(t,e,r){let i=[];for(let t of r){let e=c.get(t);e&&i.push(...e)}let a=await t({p:e,a:r},i);if(a){if(!("e"in a))return a.v;throw a.e}}async function w(t,e){let{s:r,p:i,a}=e;try{for(let e=i.length-1;e>0;e--)t=t[i[e]];let e=await t[i[0]](...a);return[{r:r,v:e},c.get(e)??[]]}catch(t){return[{r:r,e:t},[]]}}function g(t,e=h){return async r=>{Array.isArray(r.p)&&await e(...await w(t,r))}}class p{path;constructor(t){this.path=t}async apply(t,e,r){return v(t,this.path,r)}get(t,e){return new Proxy(t,new p([e,...this.path]))}}function m(t,e){if(e){let{request:r,receive:i}=d(t);t=r,e(i)}return new Proxy(t,new p([]))}function y(t){if("send"in t)return e=>t.send(e);if("postMessage"in t)return t.postMessage.bind(t);if("emit"in t)return e=>{t.emit("message",e)};if("dispatchEvent"in t)return e=>{t.dispatchEvent(new MessageEvent("message",{data:e}))};throw TypeError("Can't find send method")}function b(t,e){if("addEventListener"in t)t.addEventListener("message",t=>e(t.data));else if("on"in t)t.on("message",e);else throw TypeError("Can't find response listener")}var M=Object.freeze({__proto__:null,createClient:m,createServer:g,probeClient:function(t,e=t){let r=y(t);if(!1===e)return m(r);let{request:i,receive:a}=d(r);return b(e,a),m(i)},probeServer:function(t,e,r){let i=!1===r?h:y(r??e);b(e,g(t,i))},serve:w,transfer:function(t,e){return c.set(t,e),t}});Symbol.iterator}}]);
//# sourceMappingURL=128.js.map